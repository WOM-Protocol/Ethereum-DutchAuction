---
id: DutchAuction_TokenVesting
title: TokenVesting
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TokenVesting</h2><p class="base-contracts"><span>is</span> <a href="Libraries_Ownable.html">Ownable</a></p><p class="description">This contract manages pre-sale tokens with particular vesting periods.</p><div class="source">Source: <a href="https://github.com/WOM-Protocol/WOM-Ethe/blob/v1.0.0/contracts/DutchAuction/TokenVesting.sol" target="_blank">DutchAuction/TokenVesting.sol</a></div><div class="author">Author: Connor Howe - ConnorBlockchain</div></div><div class="index"><h2>Index</h2><ul><li><a href="DutchAuction_TokenVesting.html#AuctionAddressAssigned">AuctionAddressAssigned</a></li><li><a href="DutchAuction_TokenVesting.html#EmergencyDrain">EmergencyDrain</a></li><li><a href="DutchAuction_TokenVesting.html#LockUpdated">LockUpdated</a></li><li><a href="DutchAuction_TokenVesting.html#Registration">Registration</a></li><li><a href="DutchAuction_TokenVesting.html#Released">Released</a></li><li><a href="DutchAuction_TokenVesting.html#Revoked">Revoked</a></li><li><a href="DutchAuction_TokenVesting.html#TokenVestingRevoked">TokenVestingRevoked</a></li><li><a href="DutchAuction_TokenVesting.html#TokensRecieved">TokensRecieved</a></li><li><a href="DutchAuction_TokenVesting.html#TokensReleased">TokensReleased</a></li><li><a href="DutchAuction_TokenVesting.html#emergencyDrain">emergencyDrain</a></li><li><a href="DutchAuction_TokenVesting.html#">fallback</a></li><li><a href="DutchAuction_TokenVesting.html#getCliff">getCliff</a></li><li><a href="DutchAuction_TokenVesting.html#getDuration">getDuration</a></li><li><a href="DutchAuction_TokenVesting.html#getFinalized">getFinalized</a></li><li><a href="DutchAuction_TokenVesting.html#getReleased">getReleased</a></li><li><a href="DutchAuction_TokenVesting.html#getRevocable">getRevocable</a></li><li><a href="DutchAuction_TokenVesting.html#getStart">getStart</a></li><li><a href="DutchAuction_TokenVesting.html#getUnreleased">getUnreleased</a></li><li><a href="DutchAuction_TokenVesting.html#notEmptyAddress">notEmptyAddress</a></li><li><a href="DutchAuction_TokenVesting.html#notEmptyUint">notEmptyUint</a></li><li><a href="DutchAuction_TokenVesting.html#notLocked">notLocked</a></li><li><a href="DutchAuction_TokenVesting.html#notRegistered">notRegistered</a></li><li><a href="DutchAuction_TokenVesting.html#receiveApproval">receiveApproval</a></li><li><a href="DutchAuction_TokenVesting.html#registerPresaleVest">registerPresaleVest</a></li><li><a href="DutchAuction_TokenVesting.html#release">release</a></li><li><a href="DutchAuction_TokenVesting.html#revoke">revoke</a></li><li><a href="DutchAuction_TokenVesting.html#setAuctionAddress">setAuctionAddress</a></li><li><a href="DutchAuction_TokenVesting.html#setLock">setLock</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="AuctionAddressAssigned" class="anchor-marker"></span><h4 class="name">AuctionAddressAssigned</h4><div class="body"><code class="signature">event <strong>AuctionAddressAssigned</strong><span>(address auctionAddress) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>auctionAddress</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="EmergencyDrain" class="anchor-marker"></span><h4 class="name">EmergencyDrain</h4><div class="body"><code class="signature">event <strong>EmergencyDrain</strong><span>(address emergencyAddress, uint amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>emergencyAddress</code> - address</div><div><code>amount</code> - uint</div></dd></dl></div></div></li><li><div class="item event"><span id="LockUpdated" class="anchor-marker"></span><h4 class="name">LockUpdated</h4><div class="body"><code class="signature">event <strong>LockUpdated</strong><span>(bool lockActive) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>lockActive</code> - bool</div></dd></dl></div></div></li><li><div class="item event"><span id="Registration" class="anchor-marker"></span><h4 class="name">Registration</h4><div class="body"><code class="signature">event <strong>Registration</strong><span>(address who, uint256 cliff, uint256 duration) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>who</code> - address</div><div><code>cliff</code> - uint256</div><div><code>duration</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="Released" class="anchor-marker"></span><h4 class="name">Released</h4><div class="body"><code class="signature">event <strong>Released</strong><span>(uint256 amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="Revoked" class="anchor-marker"></span><h4 class="name">Revoked</h4><div class="body"><code class="signature">event <strong>Revoked</strong><span>() </span></code><hr/></div></div></li><li><div class="item event"><span id="TokenVestingRevoked" class="anchor-marker"></span><h4 class="name">TokenVestingRevoked</h4><div class="body"><code class="signature">event <strong>TokenVestingRevoked</strong><span>(address who, uint256 amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>who</code> - address</div><div><code>amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="TokensRecieved" class="anchor-marker"></span><h4 class="name">TokensRecieved</h4><div class="body"><code class="signature">event <strong>TokensRecieved</strong><span>(address who, uint256 amount, uint256 timestamp) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>who</code> - address</div><div><code>amount</code> - uint256</div><div><code>timestamp</code> - uint256</div></dd></dl></div></div></li><li><div class="item event"><span id="TokensReleased" class="anchor-marker"></span><h4 class="name">TokensReleased</h4><div class="body"><code class="signature">event <strong>TokensReleased</strong><span>(address who, uint256 amount) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>who</code> - address</div><div><code>amount</code> - uint256</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="notEmptyAddress" class="anchor-marker"></span><h4 class="name">notEmptyAddress</h4><div class="body"><code class="signature">modifier <strong>notEmptyAddress</strong><span>(address _who) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd></dl></div></div></li><li><div class="item modifier"><span id="notEmptyUint" class="anchor-marker"></span><h4 class="name">notEmptyUint</h4><div class="body"><code class="signature">modifier <strong>notEmptyUint</strong><span>(uint _uint) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_uint</code> - uint</div></dd></dl></div></div></li><li><div class="item modifier"><span id="notLocked" class="anchor-marker"></span><h4 class="name">notLocked</h4><div class="body"><code class="signature">modifier <strong>notLocked</strong><span>() </span></code><hr/></div></div></li><li><div class="item modifier"><span id="notRegistered" class="anchor-marker"></span><h4 class="name">notRegistered</h4><div class="body"><code class="signature">modifier <strong>notRegistered</strong><span>(address _who) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="emergencyDrain" class="anchor-marker"></span><h4 class="name">emergencyDrain</h4><div class="body"><code class="signature">function <strong>emergencyDrain</strong><span>(address _emergencyAddress) </span><span>public </span></code><hr/><div class="description"><p>Owner can drain all remaining unreleased pre-sale tokens incase a vulnerability is found.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="Libraries_Ownable.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_emergencyAddress</code> - Address where total unrealeased tokens will be transferred too.</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address _tokenWOM) </span><span>public </span></code><hr/><div class="description"><p>Initializes instance of Token Contract and assigns address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="DutchAuction_TokenVesting.html#notEmptyAddress">notEmptyAddress </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_tokenWOM</code> - Address of ERC20 token contract for WOM.</div></dd></dl></div></div></li><li><div class="item function"><span id="getCliff" class="anchor-marker"></span><h4 class="name">getCliff</h4><div class="body"><code class="signature">function <strong>getCliff</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>Epoch seconds of users Cliff.</dd></dl></div></div></li><li><div class="item function"><span id="getDuration" class="anchor-marker"></span><h4 class="name">getDuration</h4><div class="body"><code class="signature">function <strong>getDuration</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>The duration of the token vesting.</dd></dl></div></div></li><li><div class="item function"><span id="getFinalized" class="anchor-marker"></span><h4 class="name">getFinalized</h4><div class="body"><code class="signature">function <strong>getFinalized</strong><span>() </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><dl><dt><span class="label-return">Returns:</span></dt><dd>If all pre-sale tokens have been released/claimed..</dd></dl></div></div></li><li><div class="item function"><span id="getReleased" class="anchor-marker"></span><h4 class="name">getReleased</h4><div class="body"><code class="signature">function <strong>getReleased</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>The amount of tokens released.</dd></dl></div></div></li><li><div class="item function"><span id="getRevocable" class="anchor-marker"></span><h4 class="name">getRevocable</h4><div class="body"><code class="signature">function <strong>getRevocable</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>True if the vesting is revocable.</dd></dl></div></div></li><li><div class="item function"><span id="getStart" class="anchor-marker"></span><h4 class="name">getStart</h4><div class="body"><code class="signature">function <strong>getStart</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>The start time of token vesting.</dd></dl></div></div></li><li><div class="item function"><span id="getUnreleased" class="anchor-marker"></span><h4 class="name">getUnreleased</h4><div class="body"><code class="signature">function <strong>getUnreleased</strong><span>(address _who) </span><span>public </span><span>view </span><span>returns  (uint256) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>The amount of tokens unreleased.</dd></dl></div></div></li><li><div class="item function"><span id="receiveApproval" class="anchor-marker"></span><h4 class="name">receiveApproval</h4><div class="body"><code class="signature">function <strong>receiveApproval</strong><span>(address from, uint tokens, address token, bytes data) </span><span>public </span></code><hr/><div class="description"><p>Called once SecondPriceAuction finalise() called, and then the ERC20 calls this function.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>from</code> - SecondPriceAuction address.</div><div><code>tokens</code> - Amount of tokens that has been approved.</div><div><code>token</code> - Address of ERC20 token.</div><div><code>data</code> - Bytes conversion of pre-sale members address.</div></dd></dl></div></div></li><li><div class="item function"><span id="registerPresaleVest" class="anchor-marker"></span><h4 class="name">registerPresaleVest</h4><div class="body"><code class="signature">function <strong>registerPresaleVest</strong><span>(bool _revocable, address _who, uint128 _cliff, uint64 _duration) </span><span>public </span></code><hr/><div class="description"><p>Owner registers pre-sale amount and agreed vesting terms.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="DutchAuction_TokenVesting.html#notLocked">notLocked </a><a href="Libraries_Ownable.html#onlyOwner">onlyOwner </a><a href="DutchAuction_TokenVesting.html#notEmptyUint">notEmptyUint </a><a href="DutchAuction_TokenVesting.html#notEmptyUint">notEmptyUint </a><a href="DutchAuction_TokenVesting.html#notEmptyAddress">notEmptyAddress </a><a href="DutchAuction_TokenVesting.html#notRegistered">notRegistered </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_revocable</code> - Whether owner can revoke unreleased tokens if a breach in vesting contract.</div><div><code>_who</code> - The persons address.</div><div><code>_cliff</code> - Epoch seconds for cliff time.</div><div><code>_duration</code> - Epoch seconds for duration of vest.</div></dd></dl></div></div></li><li><div class="item function"><span id="release" class="anchor-marker"></span><h4 class="name">release</h4><div class="body"><code class="signature">function <strong>release</strong><span>() </span><span>public </span></code><hr/><div class="description"><p>Pre-sale members release their locked up funds.</p></div></div></div></li><li><div class="item function"><span id="revoke" class="anchor-marker"></span><h4 class="name">revoke</h4><div class="body"><code class="signature">function <strong>revoke</strong><span>(address _who, address _emergencyAddress) </span><span>public </span></code><hr/><div class="description"><p>Owner revokes users remaining unreleased funds, and transfers to an emergency address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="Libraries_Ownable.html#onlyOwner">onlyOwner </a><a href="DutchAuction_TokenVesting.html#notLocked">notLocked </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_who</code> - Pre-sale members address to revoke future releases.</div><div><code>_emergencyAddress</code> - Address remainder of pre-sale users unreleased tokens will be transfered to.</div></dd></dl></div></div></li><li><div class="item function"><span id="setAuctionAddress" class="anchor-marker"></span><h4 class="name">setAuctionAddress</h4><div class="body"><code class="signature">function <strong>setAuctionAddress</strong><span>(address _auctionAddress) </span><span>public </span></code><hr/><div class="description"><p>Owner assigns SecondPriceAuction address for lookups and transfers.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="Libraries_Ownable.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_auctionAddress</code> - SecondPriceAuction address.</div></dd></dl></div></div></li><li><div class="item function"><span id="setLock" class="anchor-marker"></span><h4 class="name">setLock</h4><div class="body"><code class="signature">function <strong>setLock</strong><span>(bool _lock) </span><span>public </span></code><hr/><div class="description"><p>Owner can lock the contract incase a vulnerability is found.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="Libraries_Ownable.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_lock</code> - Bool assign lock.</div></dd></dl></div></div></li></ul></div></div></div>
